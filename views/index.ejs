<div class="container-fluid px-4">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
      <div>
        <h1 class="h3 mb-0 text-gray-800">
          <% if (typeof activeCategory !== 'undefined' && activeCategory !== null) { %>
            <% const currentCategory = categories.find(cat => cat.id === activeCategory); %>
            <%= currentCategory ? currentCategory.name : '所有AI网站' %>
          <% } else { %>
            所有AI网站
          <% } %>
        </h1>
        <p class="text-muted">发现最好用的AI工具和服务</p>
      </div>
      
      <!-- <div class="d-none d-md-block">
        <button class="btn btn-sm btn-primary" id="mobile-sidebar-toggle">
          <i class="bi bi-list"></i> 分类菜单
        </button>
      </div> -->
    </div>
  
    <!-- 特色网站展示 -->
    <% if (featuredWebsites && featuredWebsites.length > 0 && !activeCategory) { %>
      <section class="featured-section mb-5">
        <h2 class="h4 mb-3"><i class="bi bi-star"></i> 推荐网站</h2>
        <div class="row">
          <% featuredWebsites.forEach(website => { %>
            <div class="col-md-4 col-lg-4 mb-4">
              <div class="card h-100 website-card featured">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-start">
                    <h3 class="card-title h5">
                      <a href="/website/<%= website.id %>"><%= website.title %></a>
                    </h3>
                    <span class="badge bg-warning">推荐</span>
                  </div>
                  <% if (website.image_url) { %>
                    <div class="website-image mb-2">
                      <img src="<%= website.image_url %>" alt="<%= website.title %>" class="img-fluid">
                    </div>
                  <% } %>
                  <p class="card-text description"><%= website.description %></p>
                  <p class="card-text"><small class="text-muted">分类: <%= website.category_name || '未分类' %></small></p>
                </div>
                <div class="card-footer bg-transparent border-0 d-flex justify-content-between">
                  <a href="/website/<%= website.id %>" class="btn btn-sm btn-outline-secondary">查看详情</a>
                  <a href="<%= website.url %>" class="btn btn-sm btn-primary" target="_blank">
                    <i class="bi bi-box-arrow-up-right"></i> 访问网站
                  </a>
                </div>
              </div>
            </div>
          <% }); %>
        </div>
      </section>
    <% } %>
  
    <!-- 网站列表 -->
    <section class="websites-grid">
      <% if (websites && websites.length > 0) { %>
        <h2 class="h4 mb-3">
          <i class="bi bi-grid-3x3-gap"></i> 
          <% if (typeof activeCategory !== 'undefined' && activeCategory !== null) { %>
            分类网站
          <% } else { %>
            所有网站
          <% } %>
          <span class="text-muted">(<%= websites.length %>)</span>
        </h2>
        <div class="row">
          <% websites.forEach(website => { %>
            <div class="col-md-4 col-xl-3 col-sm-6 mb-4">
              <div class="card h-100 website-card">
                <div class="card-body">
                  <h3 class="card-title h5">
                    <a href="/website/<%= website.id %>"><%= website.title %></a>
                    <% if (website.featured) { %>
                      <i class="bi bi-star-fill text-warning ms-1" title="推荐网站"></i>
                    <% } %>
                  </h3>
                  <% if (website.image_url) { %>
                    <div class="website-image mb-2">
                      <img src="<%= website.image_url %>" alt="<%= website.title %>" class="img-fluid rounded">
                    </div>
                  <% } %>
                  <p class="card-text description"><%= website.description.length > 100 ? website.description.substring(0, 100) + '...' : website.description %></p>
                  <p class="card-text"><small class="text-muted">分类: <%= website.category_name || '未分类' %></small></p>
                </div>
                <div class="card-footer bg-transparent border-0 text-end">
                  <a href="/website/<%= website.id %>" class="btn btn-sm btn-outline-secondary">查看详情</a>
                  <a href="<%= website.url %>" class="btn btn-sm btn-primary" target="_blank">
                    <i class="bi bi-box-arrow-up-right"></i> 访问
                  </a>
                </div>
              </div>
            </div>
          <% }); %>
        </div>
      <% } else { %>
        <div class="alert alert-info">
          <i class="bi bi-info-circle"></i> 暂无网站数据，敬请期待！
        </div>
      <% } %>
    </section>
  </div>